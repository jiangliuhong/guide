+++
title = '消息中间件'
date = 2024-02-20T11:53:59+08:00
draft = false
+++


# 消息中间件

## 消息队列设计精要

使用消息队列的常见场景主要有业务解耦、最终一致性、错峰流控等。

解耦：消息队列要解决的本质问题，各个组件之间，不再显示依赖，只需要做到消息发送成功。

最终一致性：使得所有系统结果保持一致，要么都成功，要么都失败。在使用消息队列处理最终一致性问题时，往往是对失败的消息进行重试操作，直到成功为止（这里需要要求幂等性）。同时对于始终不成功的消息，也需要增加补偿操作，进一步保证最终一致性。

错峰流控：对于一些并发较大的操作，如果一同进行，可能导致应用无法承受而宕机，加入消息队列后，可以在消费者处进行限制，按照消费者能力对消息进行处理，同时由于消息队列集群消费的特性，也可以根据消息的实际情况，按需增删消费者实例。

对于一个消息队列而言，它应该具有的功能有：

![](https://awps-assets.meituan.net/mit-x/blog-images-bundle-2016/e93c3107.png)


参考链接：[https://tech.meituan.com/2016/07/01/mq-design.html](https://tech.meituan.com/2016/07/01/mq-design.html)

## rocketmq
